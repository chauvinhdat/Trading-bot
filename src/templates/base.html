<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" type="text/css" href="static/chart.css" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
      crossorigin="anonymous"
    />
    <script> src="https://cdn.jsdelivr.net/npm/chart.js@3.5.1/dist/chart.min.js" </script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  </head>
  
  <body>  
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbar"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbar">
        <div class="navbar-nav">
          <a class="nav-item nav-link" id="home" href="/">Home</a>
          <a class="nav-item nav-link" id="logout" href="/logout">Logout</a>
          <a class="nav-item nav-link" id="login" href="/login">Login</a>
          <a class="nav-item nav-link" id="signUp" href="/sign-up">Sign Up</a>
        </div>
      </div>
    </nav>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>

    <script
      type="text/javascript"
      src="{{ url_for('static', filename='index.js') }}"
    ></script>
    <script
      type="text/css"
      src="{{ url_for('static', filename='chart.css') }}"
    ></script>
    
    <h1 id ="note" align="center">
      Notes
    </h1>
    <h2>
      <form method = "POST"> 
        <div class="balanceText">
          <label for="balance">
            Enter your budget: 
            <input type="text" placeholder = "1000" name = "balance" id = balance/>
          </label>
        </div>
        <div class="balanceText submitButton">
          <label for ="submit">
            <input type="submit" value = "submit" />
          </label>
        </div>
        <div class="balanceText submitButton resetButton">
          <label for ="reset">
            <input type="submit" value = "reset" />
          </label>
        </div>
      </form>
      <nav class="nav-txt">
        <div class="txtarea" id=txtarea>
          <label for="button">
            <button type="button" id=dropButton onclick="myFunction()"> Log </button>
          </label>
          <label for="message">
            <textarea class="message" name="message" id="message" cols="30" rows="10" style="display: none;">{{ loggy }}</textarea>
          </label> 
        </div>  
      </nav>
    </h2>
    <h3 align="center">
      {{ total_balance }}
      <form method = "POST">
        <canvas id="myChart" width="1400" height="400"></canvas>
        <script>
          var ctx = document.getElementById('myChart').getContext('2d');
          var myChart = new Chart(ctx, {
              type: 'line',
              data: {
                  labels: {{ labels | safe }},
                  datasets: [{
                      label: 'Stonk trend',
                      data: {{ values | safe }},
                      fill: false,
                      borderColor: [
                          'rgba(255, 99, 132, 1)',
                          'rgba(54, 162, 235, 1)',
                          'rgba(255, 206, 86, 1)',
                          'rgba(75, 192, 192, 1)',
                          'rgba(153, 102, 255, 1)',
                          'rgba(255, 159, 64, 1)'
                      ],
                      lineTension: 0.1
                  }]
              },
              options: {
                responsive: false
              }
          });
          </script>
        </form>
    </h3>
    <h4 align="center">
      <form method = "POST">
        <canvas align="center" id="gridChart" width="1400" height="400"></canvas>
        <script>
          var ctx = document.getElementById('gridChart').getContext('2d');
          var myChart = new Chart(ctx, {
              type: 'bar',
              data: {
                  labels: {{ grid_l | safe }},
                  datasets: [{
                      label: 'grid trend',
                      data: {{ grid_v | safe}},
                      backgroundColor: 'rgba(255, 99, 132, 0.2)',
                      borderColor: [
                          'rgba(255, 159, 64, 1)'
                      ],
                      borderWidth: 1
                  }]
              },
              options: {
                responsive: false,
                plugins: {
                legend: {
                  position: 'top',
                },
                title: {
                  display: true,
                  text: 'Chart.js Floating Bar Chart'
                  }
                }
              }
          });
          </script>
          <script>
            function myFunction() {
              var txtDisplay = document.getElementById("message");
              var grid = document.getElementById("gridChart");
              if (txtDisplay.style.display == "none") {
                txtDisplay.style.display = "block";
                  $("#myChart").animate({width: "1050px", left: "0"}, {duration: 1500, easing: "linear"});
                  $("#gridChart").animate({width: "1050px", left: "0"}, {duration: 1500, easing: "linear"});
                  $("#message").animate({width: "450px", padding: "0.8em"}, {duration: 1000, easing: "linear"});
              }
              else {
                  $("#message").animate({width: "40px", padding: "0.8em"}, {duration: 50, easing: "linear"});
                  $("#myChart").animate({position: "relative", width: "1400px", left: "30px", margin: "1em"}, {duration: 1500, easing: "linear"});
                  $("#gridChart").animate({position: "relative", width: "1400px", left: "30px", margin: "1em"}, {duration: 1500, easing: "linear"});
                  setTimeout(function(){ txtDisplay.style.display = "none"; }, 2000);
              }
            }
            /*$(document).ready(function(){
              $("#dropButton").click(function(){
                $("#myChart").animate({width: "1050px", left: "0"}, {duration: 1500, easing: "linear"});
              });
              $("#dropButton").click(function(){
                $("#gridChart").animate({width: "1050px", left: "0"}, {duration: 1500, easing: "linear"});
              });
              $("#dropButton").click(function(){
                $("#message").animate({width: "450px", padding: "0.8em"}, {duration: 1000, easing: "linear"});
              });
            });*/
          </script>
        </form>
    </h4>
  </body>
</html>